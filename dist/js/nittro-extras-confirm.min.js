_context.invoke("Nittro.Extras.Confirm",function(Dialog,Arrays,ReflectionClass){var Confirm=_context.extend(Dialog,function(options){if(!(this instanceof Confirm)){var dlg=ReflectionClass.from(Confirm).newInstanceArgs(arguments);return window.setTimeout(function(){dlg.show()},1),dlg}Confirm.Super.call(this,this._prepareOptions(arguments)),this._.promise=new Promise(function(fulfill,reject){this.on("button",function(evt){this.destroy(),"confirm"===evt.data.value?fulfill():reject()})}.bind(this))},{STATIC:{defaults:{classes:"nittro-dialog-confirm",buttons:{confirm:"OK",cancel:{label:"Cancel",type:"text"}},keyMap:{confirm:13,cancel:27}},setDefaults:function(defaults){Arrays.mergeTree(Confirm.defaults,defaults)}},_prepareOptions:function(args){var options=args[0];return"string"==typeof options&&(options={text:options},args.length>1&&(options.buttons={confirm:args[1]},args.length>2?"string"==typeof args[2]?options.buttons.cancel={label:args[2],type:"text"}:options.buttons.cancel=args[2]:options.buttons.cancel={label:"Cancel",type:"text"})),options},then:function(onfulfill,onreject){return this._.promise.then(onfulfill,onreject)}});_context.register(Confirm,"Confirm")},{Dialog:"Nittro.Extras.Dialogs.Dialog",ReflectionClass:"Utils.ReflectionClass",Arrays:"Utils.Arrays"}),_context.invoke("Nittro.Extras.Confirm",function(DOM,Arrays,Confirm){var AutoConfirm=_context.extend(function(page,options){this._={page:page,options:Arrays.mergeTree(!0,{},AutoConfirm.defaults,options)},this._.page.on("create-request",this._handleRequest.bind(this))},{STATIC:{defaults:{prompt:"Are you sure?",confirm:"Yes",cancel:"No"}},_handleRequest:function(evt){if(evt.data.context&&DOM.hasClass(evt.data.context,"nittro-confirm")){if(DOM.getData(evt.data.context,"confirmed"))return void DOM.setData(evt.data.context,"confirmed",null);evt.preventDefault();var prompt=DOM.getData(evt.data.context,"prompt")||this._.options.prompt,confirm=DOM.getData(evt.data.context,"confirm")||this._.options.confirm,cancel=DOM.getData(evt.data.context,"cancel")||this._.options.cancel;Confirm(prompt,confirm,cancel).then(function(){DOM.setData(evt.data.context,"confirmed",!0),evt.data.context instanceof HTMLFormElement?this._.page.sendForm(evt.data.context):this._.page.openLink(evt.data.context)}.bind(this),function(){DOM.setData(evt.data.context,"confirmed",null)})}}});_context.register(AutoConfirm,"AutoConfirm")},{DOM:"Utils.DOM",Arrays:"Utils.Arrays"}),_context.invoke("Nittro.Extras.Confirm.Bridges",function(Nittro){if(Nittro.DI){var ConfirmDI=_context.extend("Nittro.DI.BuilderExtension",function(containerBuilder,config){ConfirmDI.Super.call(this,containerBuilder,config)},{load:function(){var builder=this._getContainerBuilder();builder.addServiceDefinition("autoConfirm",{factory:"Nittro.Extras.Confirm.AutoConfirm()",args:{options:this._getConfig()},run:!0})}});_context.register(ConfirmDI,"ConfirmDI")}});